# ar-app
# AR приложение MOSCOW APP

Это приложение является дополененим к ТЗ. Наша команда решила, что добавление приложения с дополеннной реалностиью значительно улучшит User Expirience и добавит интереса при презентации отчета сотрудниками москомспорта кому-либо.



## Что умеет приложение?

- Демонстрация тепловой карты населенности районов Москвы
- Демонстрация отношения количества спорт-площадок к населенности районов Москвы
- Демонстрация тепловой карты расположения спорт-площадок Москвы
в дальнейшем этот функционал конечно же будет расширятся

## А как посмотреть на него?
Итак, мы сделали приложение под android версии высше, чем 7.0, а также имеющий поддержку ARСore. Конечно, приложение тестировалось только лишь на наших устройствах, поэтому на иных время загрузки сцен и экранов может достигать 5 секунд.

Мы используем позиционирование по маркерам, поэтому их также надо скачать.
Каждый маркер предназначен для отображения одной карты, поэтому следует использовать их все. Вы можете распечатать их или же просто открыть на своем мониторе и навестись на него камерой
[Cкачать приложение и QR-codes](https://drive.google.com/drive/folders/12KOw6aUfCZ1tYxdmDWP0d0gJGhikfAP0?usp=sharing)
## Скачал, что дальше?
Дальше наверняка вы все устанавливали APK не из PlayMarket, тут все аналогично. Этот процесс разный на всех телефонах, его нет смысла расписывать.

Перейдем к запуску.

![Экран Входа](https://sun9-35.userapi.com/impg/TtXv6ErblwxBPLjwJApN-hggGOjVRRYy-3pNwA/7Dr8Sh_gvUM.jpg?size=623x1280&quality=95&sign=ba2fd59bd846ad2c1c9ddbab30560181&type=album)

когда вы доходите до этого экрана возникает вопрос:
## А какие логин и пароль?
А ответ простой:
| Login | Password |
| ------ | ------ |
| admin | admin|

Нажав кнопку [Войти]() вы увидите следующий экран:

![](https://sun9-24.userapi.com/impg/2K5aKaRYDdfxRjyZyJAItnV2YZoR087R5l9vQA/uLaaGsVsPAw.jpg?size=623x1280&quality=95&sign=6826130eb8ee6d8e2ba5de14ada4d4ff&type=album)

В нем вы выбираете режим карты, в котором она будет отображается.

### А какие QR-Code для каких карт использовать?
| Имя файла | Карта |
| ------ | ------ |
| hauseMap.png |  карта населенности районов|
| enjoy-people.png | карта отношения количества спорт-площадок к населенности|
| heatMap.png | тепловая карта расположения спорт-площадок|

После выбора режима вас перебросит в сцену, где наведясь на QR-Сode вам покажут информацию.
##  А если я хочу перейти в другую сцену?
Отлично, для этого вы можете нажать на сайд бар и выбрать нужный  вам режим

![](https://sun9-69.userapi.com/impg/03FDVJdvfbGvGLxvul0gBo5YeacOWvL8naGi3g/5lxF2Fe2Q24.jpg?size=623x1280&quality=95&sign=8c85176e34321f2a0119636dc2c7e6e0&type=album)

## Карта населенности районов
Тут показывается то, насколько населен каждый район москвы. Чем больше домик - тем больше людей в этой местности проживает. Цвет же -  заселенность района. Мы не смогли найти супер-точных данных, поэтому все строится на основи плотности населения районов Москвы, найденной на mos.ru,  а также дата сета предоставленным ЛЦТ.

![](https://sun9-19.userapi.com/impg/eJ6jf29Sqaw581VNZr4b1yQp94kUQLm--MjaKA/NZyKEYPXHOk.jpg?size=623x1280&quality=95&sign=0343b4a30e796c9f3d782751d550e8b4&type=album)

## Карта отношения количества спорт-площадок к населенности
По сути эта метрика показывает плотность [аселения района] / [количество спорт-объектов]. Здесь не обошлось ез округления, поэтому мы объединили ближайшие точки, добавили к ним веса, введя еще один параметр. Таким образом формируется "выосота столба" района. Цвет же - его заселенность. Далее мы туда добавили слайдер, который означает года. Мы хотели этим показать как развивалась спорт-иинфрастуктура москвы, для этого мы просто смотрели в каком году построен объект и просто отсекали эти точки. Таким образом уменьшая их количество и высоту столба района. Метрика взята с 2010 по 2021 год.

![](https://sun9-66.userapi.com/impg/oiU1T64BiX9bk1buuAJqHcKmEtbD3-j0KQim0A/bKxFm9h1cDM.jpg?size=623x1280&quality=95&sign=827ced80b2210c1ce697d79708b01493&type=album)

## тепловая карта расположения спорт-площадок
По сути мы тут пребегли к тому же методу, что и впрошлых режимах, тут величина спорт объекта (3д модели) зависит от количества спорт объектов внутри района, а его района обозначает то, какой объект находится  в данной метсности. Цвет района показывает ту же метрику. 

![](https://sun9-15.userapi.com/impg/Q1mKsoIi2WzzAoYyHbYBv3ONS19Te22ZyxBQqw/y-_40OXk6aM.jpg?size=623x1280&quality=95&sign=fee9ae07bd32988d80af16f2f7f38488&type=album)


## Хорошо, а как мне запустить код?
Мы решили, что целесообразнее всего написать такое приложение на unity. Поэтому как запустить я вам сейчас расскажу. 
Cоздайте новый проект unity, и в уже в него склонируйте репозиторий 
```sh
cd [projectName]
git clone https://github.com/MOSCOWMOVE/ar-app.git
```
затем уже зайдите в редактор unity и установите все недостающие модули.
- ARFaundation
- ARCore
- Simple Side-Menu

Не забудьте включить поддержку XR, и изменить платформу на андройд.
Следующее что вам надо, изменить движок рендера на OpenGL, посколько с ним работает ARCore, для этого перейдите в:
```sh
File>BuildSettings>PlayerSettings>XR Plug-In-Managment>ARCode
```
 и поставьте голчку напротив ARCore.
 Потом перейдите в 
 ```sh
File>BuildSettings>ProjectSettings>Player>
```
И поставьте 
 - [Minimum API Level]() на Android 7.0, 
 - [API Compatibility Level]() на .NET 4.x
 - [Graphiсs]() на OpenGL 4.0
 
 не забудьте проверить установлены ли у вас JDK, NDK, SDK под Android.
И тогда уже вы сможете нажать заветную кнопку build, установить apk на ваш андройд телефон, и посмотреть это. Но зачем когда это уже сделали мы за вас, вы можете скачать наш APK по ссылке выше, или же во вкладке [Releases]() на [github](). Важно заметить что проект unity не запустится должным образом на вашем ПК, когда вы нажмете кнопку "запустить", потому как ARFaundation использует нативные части android.
